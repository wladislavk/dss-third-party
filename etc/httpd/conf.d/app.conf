ServerName "${HTTPD_SERVER_NAME}"
ErrorLog "/dev/stderr"

<VirtualHost *:80 *:443>
    DocumentRoot "/var/www/html/api/public"
    ErrorLog "/dev/stderr"
    CustomLog "/dev/stdout" common

    <Directory "/var/www/html/api/public">
        Order allow,deny
        Allow from all
        Require all granted
    </Directory>

    SSLEngine on
    SSLProtocol all -SSLv2
    SSLCipherSuite DEFAULT:!EXP:!SSLv2:!DES:!IDEA:!SEED:+3DES
    SSLCertificateKeyFile ${ETC_HTTPD}/ssl/${HTTPD_SERVER_NAME}.key
    SSLCertificateFile ${ETC_HTTPD}/ssl/${HTTPD_SERVER_NAME}.crt

    # Allow to receive tokens in the header
    RewriteCond %{HTTP:Authorization} ^(.*)
    RewriteRule .* - [e=HTTP_AUTHORIZATION:%1]
</VirtualHost>

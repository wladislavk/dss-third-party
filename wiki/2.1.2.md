# 2.1.2. Comments and PHPDoc

## Comments

Comments SHOULD be used sparingly. Good code documents itself, and is also documented
by tests, therefore comments SHOULD NOT be the primary means of providing low-level
documentation. The primary usage of comments is for:

- documenting non-evident lines of code
- documenting code that is required to override quirks or bugs found in the framework
or in third-party libraries
- TODO comments that outline incomplete or quirky code that must be fixed.

Comments MAY be added in the following places:

- single-line comments - anywhere inside method bodies
- on the first line of method phpdocs
- just before class definitions

A name is better than a comment, so these lines
```
// retrieve domain name from URL
$newString = preg_replace('/http:\/\/(.*?)\?/', '$1', $string);
```

SHOULD be replaced with
```
$newString = $this->retrieveDomainNameFromURL($string);
...
private function retrieveDomainNameFromURL($string)
{
    return preg_replace('/http:\/\/(.*?)\?/', '$1', $string);
}
```

## PHPDoc blocks

PHPDoc blocks MUST be present for every class method except for the methods that do
not take any argument and do not return a value. Also, phpdoc blocks MUST be present
for every class property.

TODO annotations MUST be done following the PHPDoc convention, `@todo`, see [1].

All PHPDoc blocks MUST contain all possible types for properties, arguments and 
return values. If an argument, property or return value is an array, phpdoc SHOULD
specify its element types, such as `string[]`, rather than just `array`. Special
type `mixed` SHOULD NOT be used, if the variable is not strongly typed, it is recommended
to use pipe character, e.g. `int|string`.

Please note that certain Eloquent methods can return null as well as an object.
If this is the case, then PHPDoc MUST use pipe character with null, e.g.
`@return MyModel|null`.

There are certain methods, especially in Eloquent, that can return objects of many
different types, but only of one type per call. For example, `find()` can return any
model depending on the type of its caller. If this is the case, every call to such
method inside a class method body MUST contain its own PHPDoc line, e.g.
```
/** Foo|null $foo */
$foo = Foo::find($id); 
```

`@package` annotation before the class declaration is considered obsolete
and SHOULD NOT be used.

`@throws` annotation MUST be used on a method, if:
1) the method throws an exception and it is uncaught in the same method, or
2) one of the method's callees throws an exception and it is uncaught neither in the 
callee nor in the method, which applies to callees in vendor packages as well, but
3) if an exception is of type `RuntimeException` or any of its subtypes, the method
MUST NOT use `@throws` annotation.

[1]: https://phpdoc.org/docs/latest/references/phpdoc/tags/todo.html

# 4.2.1. What must be tested in an API test?

API tests act as replacement for unit tests for controller classes. Unlike unit
tests, they do not contain mocks and run on a real database. API tests MUST use
Laravel testing mechanism that creates a special instance of kernel that mocks HTTP requests.
 
API tests SHOULD test API response only, not the actual state of the database.
However, sometimes it is allowed to connect to external resources, such as:
- if there was a confirmed bug that API returned 'good' answer even if DB changes
were not handled properly;
- if any emails are sent, there SHOULD be some test checking the email data.
 
Each API test class MUST correspond to one controller class. Each `return` operator
of the controller class MUST have at least one test method.

If middleware is used, it MUST be tested as well, middleware SHOULD be tested on
a very simple controller or a special dummy controller MAY be created.

If a third-party API is called, and this API does not provide any test credentials,
a bridge SHOULD be created together with a 'dummy' implementation that emulates
the API call.

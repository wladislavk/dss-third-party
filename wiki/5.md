# 5. Swagger documentation

All API endpoints MUST be documented using Swagger. You can view complete Swagger specification
[here](https://swagger.io/specification/). All Swagger documentation MUST be written
using Doctrine annotations, as specified [here](https://github.com/zircote/swagger-php).

Swagger annotations are divided into three parts.

1) Common annotations such as the info object and standard error responses. These are currently
defined in `BaseRestController` class.
2) Model definitions. These are generated from `@property` annotations on model classes in
`Eloquent` namespace.
3) Controller action definitions. These are generated for RESTful methods (index, show, store, update, destroy)
in children of `BaseRestController` using existing validation rules and are added manually for all 
other methods and classes.

In order to auto-generate annotations, `php artisan swagger:generate` command SHOULD be used.
To generate both annotations and Swagger JSON at the same time, run `./swagger-generate.sh`. 
If you do not want the script to override existing annotations, add `@DSS\Manual` as the first 
line in PHPDoc.

To work properly, no non-empty lines may be present between the beginning of doc block and
Swagger annotations (or `@DSS\Manual`).
 
IMPORTANT: `php artisan ide-helper:models` command MUST NOT be run with `-W` flag, because 
it will interfere with the generation script. To add new DB fields to the model, run 
`php artisan ide-helper:models` without flags, then copy over the new property definition 
from `_ide_helper_models.php`.

Newly generated JSON file should be manually copied to its separate repository to provide UI.

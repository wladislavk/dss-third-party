# 6.2. Table and column definitions

## Table definitions

All tables MUST use InnoDB and MUST use `utf8_unicode_ci` collation. 

Table names SHOULD use only lowercase letters and underscores. Table names MAY contain 
numbers when a number is a part of common abbreviation and SHOULD NOT use numbers otherwise. 

Table names SHOULD be pluralized.

Tables SHOULD NOT have more than 20 columns. For wide tables, consider using serialization
or one-to-one relations.

Tables and columns SHOULD be designed in a way that follows third normal form unless
proven that de-normalized form gives significant performance gain.

## Views and stored procedures

SQL views and custom stored procedures SHOULD NOT be used. Stored procedures MAY be
used if proven that their use leads to performance gains.

## Column definitions

All `VARCHAR` and `TEXT` columns MUST use `utf8_unicode_ci` collation. 

Column names SHOULD use only lowercase letters and underscores. Column names MAY contain 
numbers when a number is a part of common abbreviation and SHOULD NOT use numbers otherwise.

All boolean columns MUST use the same definition: `TINYINT(1) NOT NULL` with `DEFAULT` added
if needed. Boolean column names SHOULD be prefixed with `is_` or `has_`.

All tables except for pivot tables MUST have a single surrogate auto-incremented primary
key named `id` with definition `INT(10) UNSIGNED NOT NULL AUTO_INCREMENT`.

Pivot tables SHOULD use Eloquent-friendly definitions whenever possible so that
`belongsToMany()` method can be used on models.

All foreign keys MUST be defined as MySQL constraints. `RESTRICT` SHOULD be the default
behavior on update and delete if there are no reasons for different behavior.

Foreign keys MUST be named `x_id` where 'x' is the singular version of the related table
name. There are the following exceptions to this rule:
1) A table that has more than one relation to another table - in this case, 'x' in
`x_id` MAY be chosen arbitrarily to reflect the nature of relation.
2) A table that links onto itself - the foreign key MUST be named `parent_id`.

Integer and boolean columns SHOULD be indexed if they are used in at least one
WHERE condition anywhere in the API.

Money and other calculatable non-integer numbers SHOULD use `DECIMAL` instead of `FLOAT`
and `DOUBLE`.

Datetime columns SHOULD use `TIMESTAMP` if they reflect the moment of time when some event
took place (such as creating / updating the record) and SHOULD use `DATETIME` or less
specific types otherwise.

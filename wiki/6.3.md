# 6.3. Queries

Queries SHOULD be as simple as possible unless proven that long query will give performance
loss. Doing a lot of operations in a single query is not always the best way to write
SQL, sometimes dividing long queries is beneficial both for performance and readability.

However, "N+1 queries" problem is even more harmful and longer queries MAY be used
if they are the only way to avoid N+1.

Queries SHOULD NOT contain operations that can be labelled as 'logical' because this logic
is much easier to test if it is contained in programming code and perhaps it would perform
better in code too. Also, there are certain functions that perform way faster in PHP
than in MySQL.

Therefore, certain operators and functions MUST NOT be used unless it is proven they
perform better in SQL. These include `CASE`, `IF`, `CONCAT`, `CAST` and `COALESCE`.

In general, SQL functions SHOULD NOT be used, except for:
- basic aggregate functions such as `SUM`, `COUNT` and `AVG`
- datetime functions.

`LIKE` is always a performance hit and it SHOULD be avoided if possible.

Raw SQL SHOULD NOT be used in queries because it bypasses any filters, relations
etc. that were created in Eloquent, besides Eloquent non-raw queries tend to give
better performance. If raw SQL must be used for some reason, ANSI-compatible syntax
SHOULD be preferred.

If a query returns data from more than one table, its results SHOULD be wrapped in
a separate struct or non-persistent model to provide type hinting and type safety.
